<div class="signup-page">
  <div class="signup-card">
    <!-- Step 1: Email Input -->
    <div class="step-container" [class.step-hidden]="currentStep !== 1" [class.step-visible]="currentStep === 1">
      <button type="button" class="back-button" *ngIf="currentStep === 2" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>

      <h1 class="signup__title">
        Getting Started with <span class="highlight">Ijaw Voices!</span> ðŸ¥³
      </h1>
      <p class="signup__subtitle">Let's create an account for you</p>

      <form class="signup-form" [formGroup]="signUpForm">
        <div class="form-group">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            id="email"
            class="form-input"
            [class.form-input-error]="signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched"
            placeholder="Enter your email"
            formControlName="email"
          />
          <div class="error-message" *ngIf="signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched">
            <span *ngIf="signUpForm.get('email')?.errors?.['required']">Email is required</span>
            <span *ngIf="signUpForm.get('email')?.errors?.['email']">Please enter a valid email</span>
          </div>
        </div>

        <button type="button" class="btn btn-primary" (click)="onNextStep()">Next</button>
      </form>

      <div class="divider">
        <span>Or Register with</span>
      </div>

      <div class="social-buttons">
        <!-- Google Button -->
        <button type="button" class="btn btn-google" (click)="signUpWithGoogle()">
          <img src="images/google.png" alt="google logo" class="social-icon--image" />
          Sign up with Google
        </button>

        <!-- Facebook Button -->
        <button type="button" class="btn btn-facebook" (click)="signUpWithFacebook()">
          <i class="fab fa-facebook-f social-icon"></i>
          Sign up with Facebook
        </button>
      </div>

      <p class="login-link mt-3">
        Already have an account? <a routerLink="/auth/login" class="link">Log in</a>
      </p>
    </div>

    <!-- Step 2: Full Registration Form -->
    <div class="step-container" [class.step-hidden]="currentStep !== 2" [class.step-visible]="currentStep === 2">
      <button type="button" class="back-button" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>

      <h1 class="signup__title">
        Getting Started with <span class="highlight">Ijaw Voices!</span> ðŸ¥³
      </h1>
      <p class="signup__subtitle">Let's create an account for you</p>

      <form class="signup-form" [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="firstName" class="form-label">First Name</label>
          <input
            type="text"
            id="firstName"
            class="form-input"
            [class.form-input-error]="signUpForm.get('firstName')?.invalid && signUpForm.get('firstName')?.touched"
            placeholder="Enter your first name"
            formControlName="firstName"
          />
          <div class="error-message" *ngIf="signUpForm.get('firstName')?.invalid && signUpForm.get('firstName')?.touched">
            <span *ngIf="signUpForm.get('firstName')?.errors?.['required']">First name is required</span>
          </div>
        </div>

        <div class="form-group">
          <label for="lastName" class="form-label">Last Name</label>
          <input
            type="text"
            id="lastName"
            class="form-input"
            [class.form-input-error]="signUpForm.get('lastName')?.invalid && signUpForm.get('lastName')?.touched"
            placeholder="Enter your last name"
            formControlName="lastName"
          />
          <div class="error-message" *ngIf="signUpForm.get('lastName')?.invalid && signUpForm.get('lastName')?.touched">
            <span *ngIf="signUpForm.get('lastName')?.errors?.['required']">Last name is required</span>
          </div>
        </div>

        <div class="form-group">
          <label for="password" class="form-label">Password</label>
          <div class="password-input-wrapper">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              class="form-input"
              [class.form-input-error]="signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched"
              placeholder="Create password"
              formControlName="password"
            />
            <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
              <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
            </button>
          </div>
          <div class="error-message" *ngIf="signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched">
            <span *ngIf="signUpForm.get('password')?.errors?.['required']">Password is required</span>
            <span *ngIf="signUpForm.get('password')?.errors?.['passwordStrength']">
              Password must be at least 6 characters with 1 uppercase letter and 1 special character
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <div class="password-input-wrapper">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              class="form-input"
              [class.form-input-error]="(signUpForm.get('confirmPassword')?.invalid && signUpForm.get('confirmPassword')?.touched) || signUpForm.errors?.['passwordMismatch']"
              placeholder="Confirm password"
              formControlName="confirmPassword"
            />
            <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
              <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
            </button>
          </div>
          <div class="error-message" *ngIf="signUpForm.get('confirmPassword')?.touched">
            <span *ngIf="signUpForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
            <span *ngIf="signUpForm.errors?.['passwordMismatch'] && !signUpForm.get('confirmPassword')?.errors?.['required']">
              Passwords do not match
            </span>
          </div>
        </div>

        <button type="submit" class="btn btn-primary">Register</button>
      </form>

      <p class="login-link mt-3">
        Already have an account? <a routerLink="/auth/login" class="link">Log in</a>
      </p>
    </div>
  </div>
</div>
